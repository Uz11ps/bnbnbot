{% extends "base.html" %}
{% block content %}
<div class="card p-4">
    <h4 class="mb-4"><i class="bi bi-currency-dollar me-2"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏ –∏ –ø–ª–∞–Ω–∞–º–∏</h4>

    <h5 class="mt-4 mb-3">üíé –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã (–ü–æ–¥–ø–∏—Å–∫–∏)</h5>
    <div class="row g-3">
        {% for plan in plans %}
        <div class="col-12 col-lg-6">
            <div class="card p-3 border-start border-success border-4 h-100">
                <form action="/plans/edit" method="post">
                    <input type="hidden" name="plan_id" value="{{ plan.id }}">
                    <div class="row g-2">
                        <div class="col-8">
                            <label class="form-label small mb-0">–ù–∞–∑–≤–∞–Ω–∏–µ (RU)</label>
                            <input type="text" name="name_ru" class="form-control form-control-sm fw-bold" value="{{ plan.name_ru }}">
                        </div>
                        <div class="col-4">
                            <label class="form-label small mb-0">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                            <input type="number" name="price" class="form-control form-control-sm" value="{{ plan.price }}">
                        </div>
                        <div class="col-6">
                            <label class="form-label small mb-0">–î–Ω–∏</label>
                            <input type="number" name="duration" class="form-control form-control-sm" value="{{ plan.duration_days }}">
                        </div>
                        <div class="col-6">
                            <label class="form-label small mb-0">–õ–∏–º–∏—Ç/–¥–µ–Ω—å</label>
                            <input type="number" name="limit" class="form-control form-control-sm" value="{{ plan.daily_limit }}">
                        </div>
                        <div class="col-12">
                            <label class="form-label small mb-0">–û–ø–∏—Å–∞–Ω–∏–µ (RU)</label>
                            <textarea name="desc_ru" class="form-control form-control-sm" rows="4">{{ plan.description_ru }}</textarea>
                        </div>
                        <div class="col-12 mt-2">
                            <button type="submit" class="btn btn-sm btn-success w-100">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞–Ω</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>

    <hr class="my-5">

    <h5 class="mb-3">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –°—Ç–∞—Ç—É—Å –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h5>
    <div class="alert alert-info py-2">
        <small>–ó–Ω–∞—á–µ–Ω–∏–µ 10 = 1 —Ç–æ–∫–µ–Ω, 12 = 1.2 —Ç–æ–∫–µ–Ω–∞. –û—Ç–∫–ª—é—á–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±–æ—Ç–µ.</small>
    </div>
    <div class="table-responsive">
        <table class="table table-sm align-middle bg-white">
            <thead>
                <tr>
                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    <th>–¶–µ–Ω–∞ (–≤ 0.1 —Ç–æ–∫–µ–Ω–∞)</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                </tr>
            </thead>
            <tbody>
                {% for item in category_prices %}
                <tr>
                    <td><code>{{ item.cat }}</code></td>
                    <td style="width: 150px;">
                        <form action="/prices/edit" method="post" class="d-flex gap-1">
                            <input type="hidden" name="key" value="{{ item.key }}">
                            <input type="number" name="value" class="form-control form-control-sm" value="{{ item.value }}" style="width: 80px;">
                            <button type="submit" class="btn btn-sm btn-outline-primary">OK</button>
                        </form>
                    </td>
                    <td>
                        <form action="/categories/toggle" method="post">
                            <input type="hidden" name="key" value="{{ item.status_key }}">
                            <button type="submit" class="btn btn-sm {% if item.is_enabled %}btn-success{% else %}btn-secondary{% endif %}">
                                {% if item.is_enabled %}–í–∫–ª—é—á–µ–Ω–∞{% else %}–û—Ç–∫–ª—é—á–µ–Ω–∞{% endif %}
                            </button>
                        </form>
                    </td>
                    <td></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
